#
# AuthN WSGI Testing environment configuration
#
# The %(here)s variable will be replaced with the parent directory of this file
#
[DEFAULT]
testConfigDir = %(here)s/../../../config

[server:main]
use = egg:Paste#http
host = 0.0.0.0
port = 5000

[pipeline:main]
pipeline = AttributeAuthorityFilter TestApp

[app:TestApp]
paste.app_factory = ndg.security.test.unit.wsgi.attributeauthority.test_attributeauthority:TestAttributeAuthorityApp

[filter:AttributeAuthorityFilter]
paste.filter_app_factory = ndg.security.server.wsgi.attributeauthority:AttributeAuthorityMiddleware.filter_app_factory
prefix = attributeauthority.

attributeauthority.environKeyName = myAttributeAuthority

# Attribute Authority settings
# 'name' setting MUST agree with map config file 'thisHost' name attribute
attributeauthority.name: Site A

# Lifetime is measured in seconds
attributeauthority.attCertLifetime: 28800 

# Allow an offset for clock skew between servers running 
# security services. NB, measured in seconds - use a minus sign for time in the
# past
attributeauthority.attCertNotBeforeOff: 0

# All Attribute Certificates issued are recorded in this dir
attributeauthority.attCertDir: %(testConfigDir)s/attributeauthority/sitea/attributeCertificateLog

# Files in attCertDir are stored using a rotating file handler
# attCertFileLogCnt sets the max number of files created before the first is 
# overwritten
attributeauthority.attCertFileName: ac.xml
attributeauthority.attCertFileLogCnt: 16
attributeauthority.dnSeparator:/

# Location of role mapping file
attributeauthority.mapConfigFilePath: %(testConfigDir)s/attributeauthority/sitea/siteAMapConfig.xml

# Settings for custom AttributeInterface derived class to get user roles for given 
# user ID
#attributeauthority.attributeInterface.modFilePath: %(testConfigDir)s/attributeauthority/sitea
attributeauthority.attributeInterface.modName: ndg.security.test.integration.authz.attributeinterface
attributeauthority.attributeInterface.className: TestUserRoles

# Config for XML signature of Attribute Certificate
attributeauthority.signingPriKeyFilePath: %(testConfigDir)s/attributeauthority/sitea/siteA-aa.key
attributeauthority.signingCertFilePath: %(testConfigDir)s/attributeauthority/sitea/siteA-aa.crt
attributeauthority.caCertFilePathList: %(testConfigDir)s/ca/ndg-test-ca.crt

